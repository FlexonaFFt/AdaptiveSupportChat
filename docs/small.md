# Technical Specification  
## Warehouse Demand Simulation & Procurement System

---

## 1. Общая цель системы

Система моделирует работу склада магазина:

- Покупатели (агенты) ежедневно совершают покупки
- На основе исторических данных обучается ML-модель
- Модель прогнозирует спрос на следующую неделю
- Агент-закупщик формирует и исполняет план закупки
- Склад обновляет остатки
- Цикл повторяется

---

## 2. Основные процессы

### 2.1 Симуляция спроса

Каждый день:
- Покупатели-агенты генерируют спрос
- Склад списывает доступный товар
- Если товара недостаточно — фиксируется lost sales

---

### 2.2 Обучение ML-модели

Периодически (например, раз в неделю):

- Формируются признаки на основе исторических продаж
- Обучается модель прогнозирования спроса
- Сохраняется модель

---

### 2.3 Прогноз спроса

- Модель прогнозирует спрос на 7 дней вперёд по каждому SKU
- Результаты сохраняются

---

### 2.4 Планирование закупки

Агент-закупщик:

- Получает прогноз спроса
- Получает текущие остатки
- Учитывает бюджет и ограничения склада
- Формирует план закупки
- Создаёт заказ поставщику

---

### 2.5 Исполнение закупки

- Заказ увеличивает остатки склада
- Обновляется состояние системы

---

## 3. Доступные операции системы

### Операции склада
- Получить текущие остатки
- Обновить остатки
- Получить историю продаж
- Получить историю заказов

---

### Операции симуляции
- Запустить симуляцию одного дня
- Запустить симуляцию N дней
- Получить отчёт по результатам симуляции

---

### Операции ML
- Обучить модель
- Получить прогноз на неделю
- Получить метрики качества

---

### Операции закупщика
- Получить прогноз
- Получить текущий склад
- Рассчитать план закупки
- Создать заказ
- Получить отчёт по закупке

---

## 4. Метрики системы

### Бизнес-метрики
- Stockout rate
- Lost sales
- Fill rate
- Общий объём продаж

### ML-метрики
- MAE / RMSE прогноза
- Стабильность признаков

---

## 5. Цикл работы системы

1. Симуляция спроса
2. Обновление склада
3. Обучение модели (по расписанию)
4. Прогнозирование
5. Планирование закупки
6. Исполнение закупки
7. Повтор цикла

---

## 6. Ограничения

- Покупатели не обучаются
- Обучается только ML-модель
- Агент-закупщик может использовать стратегию принятия решений
- Система работает в дискретном временном шаге (день)

---
